50663:(e,t)=>{"use strict";var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},r(e,t)};function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function a(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function u(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var c=function(){return!!window.MSInputMethodContext&&!!document.documentMode},l=function(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return t},d=function(e,t){var r,n,i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;try{for(var s=a(i),u=s.next();!u.done;u=s.next()){var c=u.value;if(e[c]!==t[c])return!1}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return!0},f=function(){function e(e){void 0===e&&(e=[]);var t=this;this.arr=e,this.observers=[],this.arr.push=function(e){var r=Array.prototype.push.call(t.arr,e);return t.observers.forEach((function(t){t(e)})),r}}return e.prototype.observe=function(e){this.observers.push(e)},e}(),h=function(e){var t,r,n,i,a;if("set"===e[0]){var s=e[1],u=e[2];"attributes"===s&&(s="userParams"),null===(r=window.uts)||void 0===r||r.setForWts(((t={})[s]=u,t))}if("send"===e[0])switch(e[1]){case"pageview":var c=null!==(n=e[2])&&void 0!==n?n:{},l=c.page,d=c.title,f=o(c,["page","title"]),h=p(f);null===(i=window.uts)||void 0===i||i.sendForWts("pageview",{screenName:l,title:d},{extra:{wts:{dimensions:h}}});break;case"event":var m={};if("object"==typeof e[2]){var g=e[2],v=g.eventCategory,y=g.eventAction,b=g.eventLabel;u=g.eventValue,f=o(g,["eventCategory","eventAction","eventLabel","eventValue"]),m={category:v,action:y,label:b,value:u,dimensions:h=p(f)}}else"string"==typeof e[2]&&(m={category:e[2],action:e[3],label:e[4]});null===(a=window.uts)||void 0===a||a.sendForWts("custom",{type:"event"},{extra:{wts:m}})}},p=function(e){var t={};return Object.keys(e).forEach((function(r){/^dimension([0-9]|1[0-9])$/.test(r)&&(t[r]=e[r])})),t},m=u([],s(window._trmq||[]),!1);new f(window._trmq||[]).observe((function(e){m.push(e)}));var g=function(){window._trm.clone=function(){var e=window._trm;return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.apply(window,t)}};var e=window._trm.clone();window._trm=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.apply(void 0,u([],s(t),!1)),h(t)},m.forEach((function(e){h([].slice.call(e))})),m.length=0},v="https://uts-front.line-apps.com",y={ID:"_id",COUNT:"_count",AREA:"_area",DURATION:"_durationMilliSeconds",PERCENTAGE:"_percentage"},b="cid",E={NORMAL:"normal",ANONYMOUS:"anonymous"},w=["clientId","deviceId","mid","tid","userId","userParams"],_={"^utsId$":"id","^logVersion$":"lv","^sdkVersion$":"sv","^logType$":"lt","^appName$":"an","^appEnv$":"ae","^region$":"rg","^appType$":"at","^appVersion$":"av","^appBuild$":"ab","^deviceId$":"did","^osName$":"on","^osVersion$":"ov","^networkType$":"nt","^clientId$":"cid","^anonymousId$":"anid","^userId$":"uid","^experiments$":"ex","^userParams$":"up","^clientSessionId$":"sid","^sessionParams$":"sp","^screenId$":"scid","^screenName$":"sn","^title$":"ti","^referrer$":"rf","^eventType$":"et","^eventCategory$":"ec","^eventParams$":"ep","^eventItemList":"eil","^extra$":"ext","^clientTimestamp$":"ct","^transmit$":"tt","^sequence$":"sq"},S=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"],A={none:0,error:1,warn:2,info:3,debug:4},x=new(function(){function e(){this._level=A.error}return Object.defineProperty(e.prototype,"level",{set:function(e){this._level=A[e]|A.none},enumerable:!1,configurable:!0}),e.prototype.error=function(e,t){this._level},e.prototype.warn=function(e,t){this._level},e.prototype.info=function(e,t){this._level},e.prototype.debug=function(e,t){this._level},e}()),T=function(e){function t(t){var r=e.call(this,t)||this;return r.name="UTSError",r}return n(t,e),t}(Error),M=function(e,t){if(null==t||""===t)throw new T("".concat(e," is requierd"))},C=function(e,t,r){void 0===r&&(r=!1),function(e,t,r,n){if(void 0===n&&(n=!1),n||M(e,t),typeof t!==r)throw new T("".concat(e," must be a ").concat(r))}(e,t,"string",r)},I=function(e,t,r){if(M(e,t),!r.some((function(e){return e===t})))throw new T("".concat(e," must be one of the followings: ").concat(r.map((function(e){return"'".concat(e,"'")})).join(", ")))},R=function(e){!e||I("logType",e,Object.values(E))},k=function(e){return"object"==typeof e&&("string"==typeof e.logType||"object"==typeof e.extra)},O=function(e){return"object"==typeof e&&("string"==typeof e.utsId||"string"==typeof e.customScreenName||"string"==typeof e.logType)},N=function(e){return"function"==typeof e},L=function(e){return["category","action","label","value","dimensions"].some((function(t){return t===e}))},P=function(e){return["id","version","loginStatus"].some((function(t){return t===e}))},D=function(e){return["utsId","appName","appEnv"].some((function(t){return t===e}))},B=function(e){return["utsId","region","appVersion","appBuild","deviceId","osName","osVersion","networkType","userId","mid","tid","experiments","userParams","sessionParams","screenId","screenName","title","url","referrer","extra"].some((function(t){return t===e}))},U=function(e){if("object"!=typeof e)throw new T("RequiredContext must be an object");var t=e;C("utsId",t.utsId),C("appName",t.appName),I("appEnv",t.appEnv,["local","dev","alpha","beta","rc","release"])},j=function(e,t,r){var n=!1;return(null==r?void 0:r(e))||(x.warn("Unknown key:",e),delete t[e],n=!0),n},F=function(e){return D(e)||B(e)||["logVersion","sdkVersion","logType","appType","clientSessionId","eventType","eventCategory","eventParams","eventItemList","clientTimestamp","sequence","clientId"].some((function(t){return t===e}))},V=function(e){for(var t in _){var r=new RegExp(t);if(r.test(e))return e.replace(r,_[t])}return e},q=function(e,t){var r,n;r=function(r){var n,o;if(null==t?void 0:t.beforeSend){var a=null==t?void 0:t.beforeSend(e);if(!a)return;for(var s in U(a),a)j(s,e,(function(e){return F(e)}));e=a}e.logType===E.ANONYMOUS&&w.forEach((function(t){delete e[t]}));var u=i(i({},e),{transmit:Date.now()});r&&(u.extra=i(i({},u.extra),{uts:i(i({},null===(n=u.extra)||void 0===n?void 0:n.uts),r)}));var l=function(e){var t={};for(var r in e){var n=e[r];null!=n&&(t[V(r)]=n)}return t}(i({},u)),d=null!==(o=null==t?void 0:t.endpoint)&&void 0!==o?o:v;c()?(delete l.mid,document.createElement("IMG").src="".concat(d,"/event?d=").concat(encodeURIComponent(JSON.stringify(l)))):!navigator.sendBeacon||/OS (11|12)_\d.+Mobile/.test(navigator.userAgent)?fetch("".concat(d,"/event-web"),{method:"POST",body:JSON.stringify(l),mode:"no-cors",keepalive:!0}):navigator.sendBeacon("".concat(d,"/event-web"),JSON.stringify(l)),x.debug("Sent",u)},(null===(n=navigator.userAgentData)||void 0===n?void 0:n.getHighEntropyValues)?navigator.userAgentData.getHighEntropyValues(["fullVersionList","platformVersion"]).then((function(e){var t=e.fullVersionList,n=e.platform,i=e.platformVersion,o=e.mobile;r({fullVersionList:t,platform:n,platformVersion:i,mobile:o})})).catch((function(){r()})):r()},H=new(function(){function e(){this.listeners=new Map}return e.prototype.on=function(e,t){var r,n=null!==(r=this.listeners.get(e))&&void 0!==r?r:[];n.some((function(e){return e===t}))||n.push(t),this.listeners.set(e,n)},e.prototype.emit=function(e,t,r){"send"===e&&this.send(t,r)},e.prototype.send=function(e,t){var r,n,i=+(null!==(r=null==t?void 0:t.sessionLimit)&&void 0!==r?r:1e6),o=e.sequence;if(i<=o){var a=new T("The number of logs in one session is limited to ".concat(i));throw o===i&&(e.eventType="system",e.eventCategory="TOO_MANY_RECORDS_PER_SESSION",e.eventParams=void 0,q(e,t)),a}q(e,t),null===(n=this.listeners.get("send"))||void 0===n||n.forEach((function(t){t(e)}))},e}());let K;const G=new Uint8Array(16);function z(){if(!K&&(K="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!K))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return K(G)}const W=[];for(let ve=0;ve<256;++ve)W.push((ve+256).toString(16).slice(1));var $={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function X(e,t,r){if($.randomUUID&&!t&&!e)return $.randomUUID();const n=(e=e||{}).random||(e.rng||z)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t=0){return W[e[t+0]]+W[e[t+1]]+W[e[t+2]]+W[e[t+3]]+"-"+W[e[t+4]]+W[e[t+5]]+"-"+W[e[t+6]]+W[e[t+7]]+"-"+W[e[t+8]]+W[e[t+9]]+"-"+W[e[t+10]]+W[e[t+11]]+W[e[t+12]]+W[e[t+13]]+W[e[t+14]]+W[e[t+15]]}(n)}var Y="_uts_",Q=location.hostname.split(".").splice(-2).join("."),J=function(e){return"".concat((null==e?void 0:e.logType)===E.ANONYMOUS?"cs_a":"cs").concat((null==e?void 0:e.keySuffix)?":".concat(e.keySuffix):"")},Z={set:function(e,t,r,n){void 0===r&&(r=location.hostname),void 0===n&&(n=31536e3);var i="https:"===location.protocol?"secure":"";document.cookie="".concat(Y).concat(e,"=").concat(t,"; domain=").concat(r,"; path=/; max-age=").concat(n,"; samesite=lax; ").concat(i,";")},get:function(e,t){var r=new Map(document.cookie.split(";").map((function(e){var t=s(e.split("="),2),r=t[0],n=t[1];return[r.trim(),n]}))).get("".concat(Y).concat(e));return r&&Z.set(e,r,t),r},remove:function(e,t){Z.set(e,"",t,0)}},ee=function(e){var t="".concat(b).concat(e?":".concat(e):""),r=Z.get(t,Q);return!r&&e&&(r=Z.get(b,Q))&&(Z.set(t,r,Q),Z.remove(b)),r||(r=X(),Z.set(t,r,Q)),r},te=function(e,t){Z.set(J(t),JSON.stringify(e),null==t?void 0:t.domain)},re="".concat(Y,"bi_"),ne="".concat(Y,"eli_"),ie=function(e,t){return"".concat(re).concat(e).concat(t?":".concat(t):"")},oe=function(e,t){return"".concat(ne).concat(e).concat(t?":".concat(t):"")},ae=function(){return Object.keys(localStorage).filter((function(e){return e.match(re)}))},se=function(){return Object.keys(localStorage).filter((function(e){return e.match(ne)}))},ue=function(e,t,r){localStorage.setItem(ie(t,r),JSON.stringify(e))},ce=function(e,t){var r;return JSON.parse(null!==(r=localStorage.getItem(oe(e,t)))&&void 0!==r?r:"{}")},le=function(){function e(e){var t=this;this.options=e,this.eventListener=function(e){t.onLogSend(e)},H.on("send",this.eventListener),this.flush()}return e.prototype.onLogSend=function(e){var t=e.eventType;"pageview"!==t&&"background"!==t||this.flush()},e.prototype.flush=function(){var e,t,r;return function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var n,l,d,f,h,p,m,g,v,y;return function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}(this,(function(b){var E;n=0,E=[],ae().forEach((function(e){var t=localStorage.getItem(e);t&&E.push(JSON.parse(t))})),l=E,d=function(l){var d,h,p=l.key,m=o(l,["key"]),g=ce(p,null===(e=f.options)||void 0===e?void 0:e.keySuffix);!function(e,t){localStorage.removeItem(ie(e,t))}(p,null===(t=f.options)||void 0===t?void 0:t.keySuffix),function(e,t){localStorage.removeItem(oe(e,t))}(p,null===(r=f.options)||void 0===r?void 0:r.keySuffix);var v=[];Object.keys(null!=g?g:{}).forEach((function(e){return v.push(g[e])}));var y,b,E=(y=v,void 0===(b=c()?10:100)&&(b=1),b<=0?[]:y.reduce((function(e,t,r){return r%b==0?u(u([],s(e),!1),[[t]],!1):u(u([],s(e.slice(0,-1)),!1),[u(u([],s(e.slice(-1)[0]),!1),[t],!1)],!1)}),[]));try{for(var w=(d=void 0,a(E)),_=w.next();!_.done;_=w.next()){var S=_.value;if(5==n++)return f.clear(),x.error("The number of concurrent requests is limited to ".concat(5)),{value:void 0};var A=i(i({},m),{eventItemList:S});H.emit("send",A,f.options)}}catch(e){d={error:e}}finally{try{_&&!_.done&&(h=w.return)&&h.call(w)}finally{if(d)throw d.error}}},f=this;try{for(h=a(l),p=h.next();!p.done;p=h.next())if(m=p.value,"object"==typeof(g=d(m)))return[2,g.value]}catch(e){v={error:e}}finally{try{p&&!p.done&&(y=h.return)&&y.call(h)}finally{if(v)throw v.error}}return this.clear(),[2]}))}))},e.prototype.new=function(e){var t;if(!this.isLimitExceeded()){var r=e.key;ue(e,r,null===(t=this.options)||void 0===t?void 0:t.keySuffix)}},e.prototype.add=function(e){var t,r,n,o,a,s;if(!this.isLimitExceeded()){var u=null!=e?e:{},c=u.baseImpression,l=u.id,d=u.params,f=u.area,h=u.durationMilliSeconds,p=u.percentage,m=(null!=c?c:{}).key;if(!c||null==m||!l)throw new T("Either baseImpression or id is missing");[y.ID,y.COUNT,y.AREA,y.DURATION,y.PERCENTAGE].forEach((function(e){if(Object.keys(d).some((function(t){return e===t})))throw new T("".concat(e," is not avaiable as a key for params"))})),function(e,t){return!!localStorage.getItem(ie(e,t))}(m,null===(r=this.options)||void 0===r?void 0:r.keySuffix)||ue(c,m,null===(n=this.options)||void 0===n?void 0:n.keySuffix);var g=ce(m,null===(o=this.options)||void 0===o?void 0:o.keySuffix),v=l+(null!=f?f:"")+(null!=h?h:"")+(null!=p?p:""),b=g[v];b?(b[y.COUNT]++,g[v]=b):(g[v]=i(i({},d),((t={})[y.ID]=l,t[y.COUNT]=1,t)),f&&(g[v][y.AREA]=f),h&&(g[v][y.DURATION]=h),p&&(g[v][y.PERCENTAGE]=p)),ue(c,m,null===(a=this.options)||void 0===a?void 0:a.keySuffix),function(e,t,r){localStorage.setItem(oe(t,r),JSON.stringify(e))}(g,m,null===(s=this.options)||void 0===s?void 0:s.keySuffix)}},e.prototype.clear=function(){ae().forEach((function(e){return localStorage.removeItem(e)})),se().forEach((function(e){return localStorage.removeItem(e)}))},e.prototype.isLimitExceeded=function(){var e,t,r,n=0,i=(r=[],se().forEach((function(e){var t=localStorage.getItem(e);t&&r.push(JSON.parse(t))})),r);try{for(var o=a(i),s=o.next();!s.done;s=o.next()){var u=s.value;n+=Math.ceil(Object.keys(u).length/100)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n>5},e}(),de="4.5.0",fe=function(){function e(){this.optional={},this.dimensions={}}return e.prototype.init=function(e){for(var t in e)j(t,e,D);this.required=e,this.optional={},this.eventType=void 0,this.event=void 0,this.extra=void 0,this.dimensions={},this.timestamp=void 0},e.prototype.setContext=function(e){for(var t in e){var r=e[t];/^dimension([0-9]|1[0-9])$/.test(t)?this.dimensions[t]=r:j(t,e,B)||(this.optional[t]="extra"===t?i(i({},this.optional.extra),r):r)}return this},e.prototype.setEvent=function(e){var t=e.type,r=e.event,n=e.timestamp;return this.eventType=t,this.event=r,this.timestamp=n,this},e.prototype.setExtra=function(e){return this.extra=e,this},e.prototype.build=function(e){var t,r,n,o,a,s,u,c;if(U(this.required),!this.required)throw new T("");var l=this.buildExtra(),d=l.extra,f=l.dimensions,h=null===(t=this.event)||void 0===t?void 0:t.category,p=this.buildEventParams(f),m=null!==(r=this.optional.screenName)&&void 0!==r?r:location.pathname,g="pageview"!==this.eventType?null==e?void 0:e.customScreenName:void 0;m&&g&&(d.uts={context_screen_name:m});var v=null!==(o=null!==(n=null==e?void 0:e.utsId)&&void 0!==n?n:this.optional.utsId)&&void 0!==o?o:this.required.utsId,y=null!=g?g:m,b=null!==(a=null==e?void 0:e.logType)&&void 0!==a?a:E.NORMAL;return(null==e?void 0:e.isWtsEvent)&&(v="".concat(v).concat("_wtslog")),i(i(i(i(i({},i(i(i({title:document.title,url:location.href,referrer:document.referrer,networkType:null===(s=navigator.connection)||void 0===s?void 0:s.type},this.required),this.optional),{utsId:v,screenName:y})),{logVersion:"3",logType:b,sdkVersion:de,appType:"web",eventType:null!==(u=this.eventType)&&void 0!==u?u:"temporary",eventCategory:h}),p),d&&Object.keys(d).length?{extra:d}:void 0),{clientTimestamp:null!==(c=this.timestamp)&&void 0!==c?c:Date.now()})},e.prototype.buildExtra=function(){var e,t,r,n,a=null!==(t=null===(e=this.optional)||void 0===e?void 0:e.extra)&&void 0!==t?t:{},s=a.wts,u=a.liff,c=i(i({},s),null===(r=this.extra)||void 0===r?void 0:r.wts),l=c.dimensions,d=o(c,["dimensions"]),f=i(i({},u),null===(n=this.extra)||void 0===n?void 0:n.liff);for(var h in d)j(h,d,L);for(var h in f)j(h,f,P);var p={};return Object.keys(d).length&&(p.wts=JSON.stringify(d)),Object.keys(f).length&&(p.liff=JSON.stringify(f)),{extra:p,dimensions:i(i({},this.dimensions),l)}},e.prototype.buildEventParams=function(e){var t,r,n=null!==(t=this.event)&&void 0!==t?t:{},o=n.screenName,a=n.title;n.category;var s=n.params,u=n.CLS,c=n.FID,l=n.LCP,d=i(i(i({},s),e),{CLS:u,FID:c,LCP:l});return Object.keys(d).forEach((function(e){return void 0===d[e]?delete d[e]:{}})),"pageview"===this.eventType&&(this.optional.screenName=null!==(r=null!=o?o:this.optional.screenName)&&void 0!==r?r:location.pathname,(null!=a?a:this.optional.title)&&(this.optional.title=null!=a?a:this.optional.title),this.optional.screenId=X()),Object.keys(d).length?{eventParams:d}:{}},e}(),he=function(e){return e?l(e):void 0},pe=function(){function e(e,t){var r,n,o,a,c,l=this;this.logType=e,this.options=t,this.isUserSet=!1,this.isParamsSet=!1,this.isUserChanged=function(){return l.nextMc!==l.mc||l.nextTc!==l.tc||l.nextUc!==l.uc},this.isParamsChanged=function(){var e,t;return!d(null!==(e=l.sp)&&void 0!==e?e:{},null!==(t=i(i({},l.nextSp),l.utmParams))&&void 0!==t?t:{})},this._session=function(e){var t,r=Z.get(J(e));if(!r&&(null==e?void 0:e.keySuffix)){var n=J({logType:null==e?void 0:e.logType});(r=Z.get(n,Q))&&(te(JSON.parse(r),e),Z.remove(n))}if(r)try{t=JSON.parse(r)}catch(e){x.error(e)}return t}({logType:this.logType,keySuffix:null==t?void 0:t.keySuffix}),this.sp=null===(r=this._session)||void 0===r?void 0:r.sp,this.mc=null===(n=this._session)||void 0===n?void 0:n.mc,this.tc=null===(o=this._session)||void 0===o?void 0:o.tc,this.uc=null===(a=this._session)||void 0===a?void 0:a.uc;var f,h={};if(u([],s(new URLSearchParams(location.search).entries()),!1).forEach((function(e){S.includes(e[0])&&(h[e[0]]=encodeURI(e[1]))})),this.utmParams=Object.keys(h).length?h:void 0,this.utmParams&&Object.keys(this.utmParams).length){var p=(f=null!==(c=this.sp)&&void 0!==c?c:{},S.reduce((function(e,t){return f.hasOwnProperty(t)&&(e[t]=f[t]),e}),{}));this.isParamsSet=!d(p,this.utmParams)}}return e.prototype.renew=function(){var e;this.sp=void 0,this._session={},te(this._session,{logType:this.logType,domain:this.domain,keySuffix:null===(e=this.options)||void 0===e?void 0:e.keySuffix})},e.prototype.refresh=function(){var e;this._session=i(i({},this._session),{expiredAt:Date.now()+this.duration}),te(this._session,{logType:this.logType,domain:this.domain,keySuffix:null===(e=this.options)||void 0===e?void 0:e.keySuffix})},Object.defineProperty(e.prototype,"session",{get:function(){var e,t,r,n,o,a,s=+(null!==(t=null===(e=this._session)||void 0===e?void 0:e.expiredAt)&&void 0!==t?t:0)<Date.now();s&&this.renew(),this.isUserSet&&this.isUserChanged()&&(this.renew(),this.mc=this.nextMc,this.tc=this.nextTc,this.uc=this.nextUc),this.isParamsSet&&this.isParamsChanged()&&this.renew();var u=i(i(i(i({},this.sp),this.nextSp),this.addedSp),this.utmParams);this.sp=Object.keys(u).length?u:void 0;var c=!s&&(null===(r=this._session)||void 0===r?void 0:r.sid)?null===(n=this._session)||void 0===n?void 0:n.sid:X(),l=s||null==(null===(o=this._session)||void 0===o?void 0:o.sq)?0:this._session.sq+1;return this._session={sid:c,sq:l,expiredAt:Date.now()+this.duration,sp:this.sp,mc:this.mc,tc:this.tc,uc:this.uc},te(this._session,{logType:this.logType,domain:this.domain,keySuffix:null===(a=this.options)||void 0===a?void 0:a.keySuffix}),this.nextMc=this.nextTc=this.nextUc=this.nextSp=this.addedSp=void 0,this.isUserSet=this.isParamsSet=!1,this._session},enumerable:!1,configurable:!0}),e.prototype.setUser=function(e){var t=e.mid,r=e.tid,n=e.userId;this.nextMc=he(t),this.nextTc=he(r),this.nextUc=he(n),this.isUserSet=!0},e.prototype.setParams=function(e){this.nextSp=e,this.addedSp=void 0,this.isParamsSet=!0},e.prototype.addParams=function(e){this.addedSp=e},Object.defineProperty(e.prototype,"domain",{get:function(){var e;return null===(e=this.options)||void 0===e?void 0:e.sessionDomain},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){var e,t;return+(null!==(t=null===(e=this.options)||void 0===e?void 0:e.sessionDuration)&&void 0!==t?t:18e5)},enumerable:!1,configurable:!0}),e}(),me=function(){function e(){this.sessionManagers={},this.logBuilder=new fe}return e.prototype.init=function(e,t){var r,n=this;this.options=null!=t?t:{},this.options.enableWtsWrapper=!1,x.level=null!==(r=null==t?void 0:t.logLevel)&&void 0!==r?r:"error",this.keySuffix=(null==e?void 0:e.utsId)?l(e.utsId):void 0,this.clientId=ee(this.keySuffix),Object.values(E).forEach((function(e){n.sessionManagers[e]=new pe(e,i(i({},t),{keySuffix:n.keySuffix}))})),this.impressionManager=new le(i(i({},t),{keySuffix:this.keySuffix})),this.logBuilder.init(e),x.debug("Initialized",i({version:de,logVersion:"3",clientId:this.clientId},t))},e.prototype.set=function(e,t){var r,n=this,i=e.sessionParams,a=e.mid,s=e.tid,u=e.userId,c=o(e,["sessionParams","mid","tid","userId"]),l=null!==(r=null==t?void 0:t.logType)&&void 0!==r?r:E.NORMAL;if(R(l),i&&this.sessionManagers[l].setParams(i),null!=a||null!=s||null!=u){var d={mid:a,tid:s,userId:u};Object.keys(d).forEach((function(e){var t,r=d[e];null!=r&&n.logBuilder.setContext(((t={})[e]=r,t))})),this.sessionManagers[l].setUser(d)}this.logBuilder.setContext(c)},e.prototype.setForWts=function(e,t){var r;(null===(r=this.options)||void 0===r?void 0:r.enableWtsWrapper)&&this.set(e,t)},e.prototype.setUtsId=function(e,t){this.set({utsId:e},t)},e.prototype.setRegion=function(e,t){this.set({region:e},t)},e.prototype.setAppVersion=function(e,t){this.set({appVersion:e},t)},e.prototype.setAppBuild=function(e,t){this.set({appBuild:e},t)},e.prototype.setDeviceId=function(e,t){this.set({deviceId:e},t)},e.prototype.setOSName=function(e,t){this.set({osName:e},t)},e.prototype.setOSVersion=function(e,t){this.set({osVersion:e},t)},e.prototype.setNetworkType=function(e,t){this.set({networkType:e},t)},e.prototype.setUserId=function(e,t){this.set({userId:e},t)},e.prototype.setMid=function(e,t){this.set({mid:e},t)},e.prototype.setTid=function(e,t){this.set({tid:e},t)},e.prototype.setExperiments=function(e,t){this.set({experiments:e},t)},e.prototype.setUserParams=function(e,t){this.set({userParams:e},t)},e.prototype.setSessionParams=function(e,t){this.set({sessionParams:e},t)},e.prototype.setScreenName=function(e,t){this.set({screenName:e},t)},e.prototype.setUrl=function(e,t){this.set({url:e},t)},e.prototype.setTitle=function(e,t){this.set({title:e},t)},e.prototype.setReferrer=function(e,t){this.set({referrer:e},t)},e.prototype.setExtra=function(e,t,r){var n;this.set({extra:(n={},n[e]=t,n)},r)},e.prototype.add=function(e,t){var r,n,i=e.sessionParams,o=e.impression,a=null!==(r=null==t?void 0:t.logType)&&void 0!==r?r:E.NORMAL;R(a),function(e){if((null==e?void 0:e.area)<0)throw new T("area must be 0 or more");if((null==e?void 0:e.durationMilliSeconds)<0)throw new T("durationMilliSeconds must be 0 or more");if((null==e?void 0:e.percentage)<0||100<(null==e?void 0:e.percentage))throw new T("percentage must be between 0 and 100, inclusive")}(o),i&&this.sessionManagers[a].addParams(i),o&&(null===(n=this.impressionManager)||void 0===n||n.add(o),this.sessionManagers[o.baseImpression.logType].refresh())},e.prototype.addSessionParams=function(e,t){this.add({sessionParams:e},t)},e.prototype.addImpression=function(e,t){this.add({impression:e},t)},e.prototype.new=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if("impression"===t[0]){var n=t[0],o=void 0,a=void 0,s=void 0;4===t.length?(o=t[1],a=t[2],s=t[3]):3===t.length?N(t[2])?(s=t[2],O(t[1])?a=t[1]:o=t[1]):(o=t[1],a=t[2]):2===t.length&&(N(t[1])?s=t[1]:O(t[1])?a=t[1]:o=t[1]);try{R(null==a?void 0:a.logType);var u=Date.now(),c=this.logBuilder.setEvent({type:n,event:{params:o},timestamp:u}).build(a),l=i(i({},this.buildData(c)),{key:Math.floor(u*(Math.random()+1))});null===(e=this.impressionManager)||void 0===e||e.new(l),null==s||s(void 0,l)}catch(e){null==s||s(e)}}},e.prototype.newImpression=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.new.apply(this,u(["impression"],s(e),!1))},e.prototype.send=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i,o,a,s=Date.now(),u=r[0];4===r.length?(i=r[1],o=r[2],a=r[3]):3===r.length?N(r[2])?(k(r[1])?o=r[1]:i=r[1],a=r[2]):(i=r[1],o=r[2]):k(r[1])?o=r[1]:N(r[1])?a=r[1]:i=r[1];try{if(!this.isTracked())return void x.info("".concat(this.clientId," is untracked"));I("eventType",u,["pageview","click","media","foreground","background","conversion","custom","temporary","system","webvitals"]),R(null==o?void 0:o.logType);var c=this.logBuilder.setEvent({type:u,event:i,timestamp:s}).setExtra(null==o?void 0:o.extra).build({customScreenName:null==i?void 0:i.customScreenName,logType:null==o?void 0:o.logType,isWtsEvent:null==o?void 0:o.isWtsEvent}),l=c.appEnv,d=null!==(t=null===(e=this.options)||void 0===e?void 0:e.endpoint)&&void 0!==t?t:v;if("release"===l&&d!==v)throw new T("Invalid endpoint is used for a release environment");var f=this.buildData(c);H.emit("send",f,this.options),null==a||a()}catch(e){x.error(e),null==a||a(e)}},e.prototype.sendForWts=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(null===(e=this.options)||void 0===e?void 0:e.enableWtsWrapper)&&this.send.apply(this,u([],s(t),!1))},e.prototype.sendPageview=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.send.apply(this,u(["pageview"],s(e),!1))},e.prototype.sendClick=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.send.apply(this,u(["click"],s(e),!1))},e.prototype.sendMedia=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.send.apply(this,u(["media"],s(e),!1))},e.prototype.sendForeground=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.send.apply(this,u(["foreground"],s(e),!1))},e.prototype.sendBackground=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.send.apply(this,u(["background"],s(e),!1))},e.prototype.sendConversion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.send.apply(this,u(["conversion"],s(e),!1))},e.prototype.sendCustom=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.send.apply(this,u(["custom"],s(e),!1))},e.prototype.sendTemporary=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.send.apply(this,u(["temporary"],s(e),!1))},e.prototype.buildData=function(e){var t=ee(this.keySuffix);this.clientId!==t&&(x.debug("clientId is not found in cookies"),this.clientId=t,this.sessionManagers[e.logType].renew());var r=this.sessionManagers[e.logType].session;return x.debug("Session",r),i(i({},e),{clientId:this.clientId,clientSessionId:r.sid,sequence:r.sq,sessionParams:r.sp})},e.prototype.isTracked=function(){var e,t,r,n=null!==(e=this.clientId)&&void 0!==e?e:ee(this.keySuffix),i=null!==(r=null===(t=this.options)||void 0===t?void 0:t.sampleRate)&&void 0!==r?r:100,o=l(n);return Math.abs(o%100)<i},e}(),ge=function(e){function t(){var t=e.apply(this,u([],s(arguments),!1))||this;return t.queue=[],t}return n(t,e),t.prototype.init=function(e,t){var r=this;if(!window.uts)return function(){var e;if(null===(e=window._trm)||void 0===e?void 0:e.length)g();else{var t=function(e){e.origin===location.origin&&"trmInit"===e.data&&(g(),window.removeEventListener("message",t))};window.addEventListener("message",t)}}(),void function(e,t){void 0===e&&(e="stable");var r=document.createElement("SCRIPT");r.src=function(e){return"".concat("https://static.line-scdn.net/uts/edge","/").concat(function(e){return"current"===e?"4.5.0":e}(e),"/uts.js?cb=").concat(1700549435313)}(e),r.onload=t,document.head.appendChild(r)}(null==t?void 0:t.version,(function(){if(window.uts)try{window.uts.init(e,t),r.queue.forEach((function(e){window.uts[e.func].apply(window.uts,u([],s(e.args),!1))})),r.queue.length=0}catch(e){}}));window.uts.init(e,t)},t.prototype.set=function(e,t){window.uts?window.uts.set(e,t):this.queue.push({func:"set",args:[e,t]})},t.prototype.add=function(e,t){window.uts?window.uts.add(e,t):this.queue.push({func:"add",args:[e,t]})},t.prototype.new=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];window.uts?null===(e=window.uts)||void 0===e||e.new.apply(e,u([],s(t),!1)):this.queue.push({func:"new",args:u([],s(t),!1)})},t.prototype.send=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];window.uts?(e=window.uts).send.apply(e,u([],s(t),!1)):this.queue.push({func:"send",args:u([],s(t),!1)})},t}(me);new ge}